import{W as w}from"./framework.f6ec665f.js";function W(u={}){const{immediate:g=!1,onNeedRefresh:s,onOfflineReady:n,onRegistered:a,onRegisteredSW:l,onRegisterError:d}=u;let e,c,r;const v=async(f=!0)=>{await c,await(r==null?void 0:r())};async function p(){if("serviceWorker"in navigator){const{Workbox:f}=await w(()=>import("./workbox-window.prod.es5.a7b12eab.js"),[]);e=new f("/service-worker.js",{scope:"/",type:"classic"}),r=async()=>{await(e==null?void 0:e.messageSkipWaiting())};{let i=!1;const o=()=>{i=!0,e==null||e.addEventListener("controlling",t=>{t.isUpdate&&window.location.reload()}),s==null||s()};e.addEventListener("installed",t=>{typeof t.isUpdate>"u"?typeof t.isExternal<"u"?t.isExternal?o():!i&&(n==null||n()):t.isExternal?window.location.reload():!i&&(n==null||n()):t.isUpdate||n==null||n()}),e.addEventListener("waiting",o),e.addEventListener("externalwaiting",o)}e.register({immediate:g}).then(i=>{l?l("/service-worker.js",i):a==null||a(i)}).catch(i=>{d==null||d(i)})}}return c=p(),v}export{W as registerSW};
