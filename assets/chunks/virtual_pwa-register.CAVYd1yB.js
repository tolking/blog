import{W as _}from"./framework.26GY31ux.js";function w(p={}){const{immediate:u=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:c,onRegisteredSW:o,onRegisterError:r}=p;let t,l,a;const m=async(e=!0)=>{await l,a==null||a()};async function v(){if("serviceWorker"in navigator){if(t=await _(async()=>{const{Workbox:e}=await import("./workbox-window.prod.es5.B9K5rw8f.js");return{Workbox:e}},[]).then(({Workbox:e})=>new e("/service-worker.js",{scope:"/",type:"classic"})).catch(e=>{r==null||r(e)}),!t)return;a=()=>{t==null||t.messageSkipWaiting()};{let e=!1;const d=()=>{e=!0,t==null||t.addEventListener("controlling",s=>{s.isUpdate&&window.location.reload()}),n==null||n()};t.addEventListener("installed",s=>{typeof s.isUpdate>"u"?typeof s.isExternal<"u"&&s.isExternal?d():!e&&(i==null||i()):s.isUpdate||i==null||i()}),t.addEventListener("waiting",d)}t.register({immediate:u}).then(e=>{o?o("/service-worker.js",e):c==null||c(e)}).catch(e=>{r==null||r(e)})}}return l=v(),m}export{w as registerSW};
